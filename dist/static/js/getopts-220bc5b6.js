const E=[],A=/$|[!-@[-`{-~][\s\S]*/g,O=Array.isArray,g=function(e){if(e==="")return"";if(e==="false")return!1;const n=+e;return n*0===0?n:e},R=function(e){let n={},d,s,i;for(let l in e){i=e[l],d=n[l]=O(i)?i:[i];for(let t=0;t<d.length;t++){s=n[d[t]]=[l];for(let o=0;o<d.length;o++)t!==o&&s.push(d[o])}}return n},S=function(e,n){let d={},s,i;for(let l in n)if(s=e[l],i=n[l],d[l]=i,s===void 0)e[l]=E;else for(let t=0;t<s.length;t++)d[s[t]]=i;return d},b=function(e,n,d){let s={},i,l;if(n!==void 0)for(let t=0;t<n.length;t++)if(i=n[t],l=e[i],s[i]=d,l===void 0)e[i]=E;else for(let o=0,a=l.length;o<a;o++)s[l[o]]=d;return s},w=function(e,n,d,s,i){let l,t=s[n],o=t===void 0?-1:t.length;if(o>=0||i===void 0||i(n)){l=e[n],l===void 0?e[n]=d:O(l)?l.push(d):e[n]=[l,d];for(let a=0;a<o;a++)e[t[a]]=e[n]}};function T(e,n){let d=(n=n||{}).unknown,s=R(n.alias),i=b(s,n.string,""),l=S(s,n.default),t=b(s,n.boolean,!1),o=n.stopEarly,a=[],h={_:a},r,u,c,x,p;for(let f=0,y=e.length;f<y;f++)if(u=e[f],u[0]!=="-"||u==="-")if(o)for(;f<y;)a.push(e[f++]);else a.push(u);else if(u==="--")for(;++f<y;)a.push(e[f]);else if(u[1]==="-")c=u.indexOf("=",2),u[2]==="n"&&u[3]==="o"&&u[4]==="-"?(r=u.slice(5,c>=0?c:void 0),p=!1):c>=0?(r=u.slice(2,c),p=t[r]!==void 0||(i[r]===void 0?g(u.slice(c+1)):u.slice(c+1))):(r=u.slice(2),p=t[r]!==void 0||(y===f+1||e[f+1][0]==="-"?i[r]===void 0?!0:"":i[r]===void 0?g(e[++f]):e[++f])),w(h,r,p,s,d);else{A.lastIndex=2,x=A.exec(u),c=x.index,p=x[0];for(let k=1;k<c;k++)w(h,r=u[k],k+1<c?i[r]===void 0||u.substring(k+1,k=c)+p:p===""?y===f+1||e[f+1][0]==="-"?i[r]===void 0||"":t[r]!==void 0||(i[r]===void 0?g(e[++f]):e[++f]):t[r]!==void 0||(i[r]===void 0?g(p):p),s,d)}for(let f in l)h[f]===void 0&&(h[f]=l[f]);for(let f in t)h[f]===void 0&&(h[f]=!1);for(let f in i)h[f]===void 0&&(h[f]="");return h}export{T as g};
